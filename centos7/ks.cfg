install
cdrom
text
lang en_US.UTF-8
keyboard us
network  --bootproto=dhcp --device=enp0s3 --noipv6 --activate
rootpw vagrant
firewall --disabled
selinux --disabled
timezone UTC
bootloader --location=mbr --boot-drive=sda
ignoredisk --only-use=sda
autopart
clearpart --none --initlabel
auth --enableshadow --passalgo=sha512
user --name=vagrant --groups=wheel --password=vagrant
firstboot --enable

%packages --ignoremissing --excludedocs
@Base
@Core
@Development Tools
-*-firmware
openssh-clients
sudo
gcc
kernel-devel
vim
wget
curl
%end

%post
yum update -y
yum clean all

cat << EOF > /etc/sudoers.d/wheel
Defaults:%wheel env_keep += "SSH_AUTH_SOCK"
Defaults:%wheel !requiretty
%wheel ALL=(ALL) NOPASSWD: ALL
EOF

mkdir ~/.ssh
chmod 700 ~/.ssh
cd ~/.ssh
wget --no-check-certificate 'https://raw.github.com/mitchellh/vagrant/master/keys/vagrant.pub' -O authorized_keys
chmod 600 ~/.ssh/authorized_keys
chown -R vagrant ~/.ssh

%end
